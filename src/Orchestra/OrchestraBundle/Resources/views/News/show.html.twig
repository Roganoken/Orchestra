{% extends '::base.html.twig' %}

{% block stylesheets %}
    {% include "OrchestraOrchestraBundle:Default:stylesheet.html.twig" %}
    <link rel="stylesheet" href="{{ asset('bundles/orchestraorchestra/css/style_news_show.css') }}" type="text/css" media="all" />
    
{% endblock %}


{% block header %}
    {% include "OrchestraOrchestraBundle:Default:header.html.twig" %}      
{% endblock %}


{% block contenu %}

<div id="contenu">
    
    {% include "OrchestraOrchestraBundle:Default:menu_gauche.html.twig" %}
 <div id="content">   
  <div id="content_form_edit">
       
      <div id="form_edit">      
       
        <div class="bloc_tuto width_tuto">
    
            <div class="titre_bloc">
                <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                <div class="txt_titre_bloc"><p>{{ entity.title }}</p></div>
            </div>
            
            <div class="bloc_contenu_tuto width_contenu_tuto">  
                
                <table class="record_properties">
                    <tbody>

                        <tr>
                            <!--  <th>Contenu</th> -->
                            <td class="contenu">{{ entity.content }}</td>
                        </tr>
                        <tr>
                            <!--  <th>Ajouté :</th> -->
                            <td>Ajouté le : {{ entity.created|format_datetime(null, 'fr', 'Europe/Paris', constant('IntlDateFormatter::LONG'), constant('IntlDateFormatter::SHORT')) }} par <a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': entity.User.id }) }}">{{ entity.User.firstname }} {{ entity.User.lastname }}</a> </td>
                        </tr>
                        <tr>
                            <!-- <th>Modifié : </th> -->
                            <td>Modifié : {{ time_diff(entity.updated) }}</td>
                        </tr>
                    </tbody>
                </table>
                
            </div>
        </div> 

       <div class="bloc_tuto width_tuto">

            <div class="titre_bloc">
                <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                <div class="txt_titre_bloc"><p>Commentaires</p></div>
            </div>
            
            <div class="bloc_contenu_tuto width_contenu_tuto">  
                <div class="contenu_commentaire">
                    {% if entity.Commentaire|length > 0 %}
            
                        <ul>
                        {% for commentaire in entity.Commentaire|reverse %}
                            <li class="li_commentaire">
                                {% if commentaire.User.photo %}
                                    <img width="18" height="18" src="{{ ('avatar/' ~ commentaire.User.photo) | apply_filter('my_thumb') }}" />
                                {% else %}
                                    <img width="18" height="18" src="{{ ('avatar/default.jpg') | apply_filter('my_thumb') }}" />
                                {% endif %}
                                <a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': commentaire.User.id }) }}">{{ commentaire.User.firstname }} {{ commentaire.User.lastname }}</a> 
                                <span class="txt_commentaire">dit : </span>{{ commentaire.contenu }} <span class="txt_commentaire">[{{ time_diff(commentaire.created) }}]</span>
                                {% if app.security.getToken().getUser() == commentaire.User %}
                                    <a href="{{ path('news_commentaire_delete', { 'actualite': entity.id, 'id': commentaire.id }) }}"><span class="croix_supp">X</span></a>
                                {% endif %}
                            </li>
                        {% endfor %}
                        </ul>

                        
                    {% else %}
                    pas encore de commentaires.    
                    {% endif %}
                 </div>
                 

            </div>
        </div> 
        
        
         {% include 'OrchestraOrchestraBundle:News:addCommentaire.html.twig' %}
       

      </div>            
                
                <ul class="record_actions">
                    
                    <div class="titre_bloc retour_tuto">
                        <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                        <div class="txt_titre_bloc">
                            <a href="{{ path('news') }}">Revenir aux actualités</a>
                        </div>
                    </div>

                    {% if is_granted("ROLE_ADMIN") or entity.User.id == app.security.getToken().getUser().getId() %}

                        <div class="titre_bloc retour_tuto">
                            <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                            <div class="txt_titre_bloc"><a href="{{ path('news_edit', { 'id': entity.id }) }}">Modifier</a></div>
                        </div>
                        
                       <div class="titre_bloc retour_tuto">
                            <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                            <div class="txt_titre_bloc">
                                <form action="{{ path('news_delete', { 'id': entity.id }) }}" method="post">
                                    {{ form_widget(delete_form) }}
                                    <button class="btn_supp" type="submit">Supprimer</button>
                                </form>
                            </div>
                        </div>

                    {% endif %}
                </ul>
                
                

    
    </div>
 
 </div>
 
 </div>  
{% endblock %}