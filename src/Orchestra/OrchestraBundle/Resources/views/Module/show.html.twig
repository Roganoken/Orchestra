{% extends '::base.html.twig' %}

{% block stylesheets %}
    {% include "OrchestraOrchestraBundle:Default:stylesheet.html.twig" %}
    <link rel="stylesheet" href="{{ asset('bundles/orchestraorchestra/css/style_edit_profil.css') }}" type="text/css" media="all" />
{% endblock %}


{% block header %}
    {% include "OrchestraOrchestraBundle:Default:header.html.twig" %}      
{% endblock %}


{% block contenu %}

<div id="contenu">
    {% include "OrchestraOrchestraBundle:Default:menu_gauche.html.twig" %}
<h1>Tutorat</h1>

<table class="record_properties">
    <tbody>
        <tr>
            <th>Intitule</th>
            <td>{{ entity.intitule }}</td>
        </tr>
        <tr>
            <th>Description</th>
            <td>{{ entity.description }}</td>
        </tr>
        <tr>
            <th>Date</th>
            <td>{{ entity.date| format_datetime(null, 'fr', 'Europe/Paris', constant('IntlDateFormatter::LONG'), constant('IntlDateFormatter::SHORT')) }}</td>
        </tr>
        <tr>
            <th>Salle</th>
            <td>{{ entity.salle.numero }} - {{ entity.salle.nom }} [{{entity.salle.capacite }} places]</td>
        </tr>
        <tr>
            <th>Ajouté le</th>
            <td>{{ entity.created| format_datetime(null, 'fr', 'Europe/Paris', constant('IntlDateFormatter::LONG'), constant('IntlDateFormatter::SHORT')) }}</td>
        </tr>
        <tr>
            <th>Par :</th>
            <td><a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': entity.moduleUser.id }) }}">{{ entity.moduleUser.firstname }} {{ entity.moduleUser.lastname }}</a></td>
        </tr>
        <tr>
            <th>Dernière modification</th>
            <td>{{ time_diff(entity.updated) }}</td>
        </tr>
    </tbody>
</table>

<p><b>Participants :</b></p>
{% if entity.User|length > 0 %}
    {% for participant in entity.User %}

                {% if participant.photo %}
                <img width="18" height="18" src="{{ ('avatar/' ~ participant.photo) | apply_filter('my_thumb') }}" />
                {% else %}
                    <img width="18" height="18" src="{{ ('avatar/default.jpg') | apply_filter('my_thumb') }}" />
                {% endif %}

        <a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': participant.id }) }}">{{ participant.firstname }} {{ participant.lastname }}</a> 
         {% if participant.classe %}[{{ participant.classe }}]{% endif %}<br />
    {% endfor %}
{% else %}
   aucun participants    
{% endif %}
   
<ul class="record_actions">
    <li>
        
        {% if app.security.getToken().getUser() in entity.User %}
            <a href="{{ path('module_desinscription', { 'id': entity.id }) }}">Se désinscrire</a>
        {% else %}
            <a href="{{ path('module_inscription', { 'id': entity.id }) }}">S'inscrire</a>
        {% endif %}
    </li>
    <li>
        <a href="{{ path('module') }}">
            Revenir à la liste des tutorats
        </a>
    </li>
    {% if is_granted("ROLE_ADMIN") or entity.moduleUser.id == app.security.getToken().getUser().getId() %}
    <li>
        <a href="{{ path('module_edit', { 'id': entity.id }) }}">
            Modifier
        </a>
    </li>
    <li>
        <form action="{{ path('module_delete', { 'id': entity.id }) }}" method="post">
            {{ form_widget(delete_form) }}
            <button type="submit">Delete</button>
        </form>
    </li>
    {% endif %}
</ul>

                </div>

{% endblock %} 