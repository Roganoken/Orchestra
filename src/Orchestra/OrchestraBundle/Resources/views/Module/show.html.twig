{% extends '::base.html.twig' %}

{% block stylesheets %}
    {% include "OrchestraOrchestraBundle:Default:stylesheet.html.twig" %}
    <link rel="stylesheet" href="{{ asset('bundles/orchestraorchestra/css/style_tutorat_show.css') }}" type="text/css" media="all" />
{% endblock %}


{% block header %}
    {% include "OrchestraOrchestraBundle:Default:header.html.twig" %}      
{% endblock %}


{% block contenu %}

<div id="contenu">
    {% include "OrchestraOrchestraBundle:Default:menu_gauche.html.twig" %}
   <div id="content">           
      <div id="content_form_edit">
           
          <div id="form_edit">      
           
            <div class="bloc_tuto width_tuto">
        
                <div class="titre_bloc">
                    <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc"><p>{{ entity.intitule }}</p></div>
                </div>
                
                <div class="bloc_contenu_tuto width_contenu_tuto">   
                   <table class="record_properties">
                        <tbody>
                            <!--  <tr>
                                 <th>Intitule</th> 
                                <td class="intitule">{{ entity.intitule }}</td>
                            </tr> -->
                            <tr>
                                <!--  <th>Description</th> -->
                                <td class="description">{{ entity.description }}</td>
                            </tr>
                            <tr>
                               <!--   <th>Date</th> -->
                                <td>{{ entity.date| format_datetime(null, 'fr', 'Europe/Paris', constant('IntlDateFormatter::LONG'), constant('IntlDateFormatter::SHORT')) }}</td>
                            </tr>
                            <tr>
                                <!--  <th>Salle</th>  -->
                                <td>Salle {{ entity.salle.numero }} - {{ entity.salle.nom }} [{{entity.salle.capacite }} places]</td>
                            </tr>
                            <!--  <tr>
                                <th>Ajouté le</th>
                                <td>{{ entity.created| format_datetime(null, 'fr', 'Europe/Paris', constant('IntlDateFormatter::LONG'), constant('IntlDateFormatter::SHORT')) }}</td>
                            </tr> -->
                            <tr>
                               <!--   <th>Ajouté par </th> -->
                                <td class="ajout_par">Ajouté par <a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': entity.moduleUser.id }) }}">{{ entity.moduleUser.firstname }} {{ entity.moduleUser.lastname }}</a></td>
                            </tr>
                           <!--   <tr>
                                <th>Dernière modification</th>
                                <td>{{ time_diff(entity.updated) }}</td>
                            </tr> -->
                        </tbody>
                    </table>

                </div>
            </div> 

          </div>
          
          <ul id="actions_droite">
            
                <div class="titre_bloc retour_tuto">
                    <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc">
                        <a href="{{ path('module') }}">Revenir aux tutorats</a>
                    </div>
                </div>
                
                
                
                <div class="titre_bloc sinscrire">
                    <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc">
                        {% if app.security.getToken().getUser() in entity.User %}
                            <a href="{{ path('module_desinscription', { 'id': entity.id }) }}">Se désinscrire</a>
                        {% else %}
                            <a href="{{ path('module_inscription', { 'id': entity.id }) }}">S'inscrire</a>
                        {% endif %}
                    </div>
                </div>

                
                
                <div class="bloc_tuto width_participants">
        
                    <div class="titre_bloc">
                        <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                        <div class="txt_titre_bloc"><p>Participants</p></div>
                    </div>
                    
                    <div class="bloc_contenu_tuto width_contenu_part">   
                        {% if entity.User|length > 0 %}
                          {% for participant in entity.User %}
                
                                {% if participant.photo %}
                                <img width="18" height="18" src="{{ ('avatar/' ~ participant.photo) | apply_filter('my_thumb') }}" />
                                {% else %}
                                    <img width="18" height="18" src="{{ ('avatar/default.jpg') | apply_filter('my_thumb') }}" />
                                {% endif %}
                
                                <a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': participant.id }) }}">{{ participant.firstname }} {{ participant.lastname }}</a> 
                          
                                {% if participant.classe %}<span> - {{ participant.classe }}</span>{% endif %}<br />
                             
                          {% endfor %}
                       {% else %}
                           Aucun participant    
                       {% endif %}
                    </div>
                </div> 
                
                
                {% if is_granted("ROLE_ADMIN") or entity.moduleUser.id == app.security.getToken().getUser().getId() %}

                <div class="titre_bloc retour_tuto">
                    <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc"><a href="{{ path('module_edit', { 'id': entity.id }) }}">Modifier</a></div>
                </div>
                
               <div class="titre_bloc retour_tuto">
                    <div class="picto_tutorat_titre"><img  src="{{ asset ('bundles/orchestraorchestra/img/picto_tutorat.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc">
                        <form action="{{ path('module_delete', { 'id': entity.id }) }}" method="post">
                            {{ form_widget(delete_form) }}
                            <button class="btn_supp" type="submit">Supprimer</button>
                        </form>
                    </div>
                </div>

                {% endif %}
 
            </ul>
    </div>
          
   </div>         
 </div>

{% endblock %} 