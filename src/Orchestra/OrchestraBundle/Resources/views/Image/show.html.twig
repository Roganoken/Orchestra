{% extends '::base.html.twig' %}

{% block stylesheets %}
    {% include "OrchestraOrchestraBundle:Default:stylesheet.html.twig" %}
    <link rel="stylesheet" href="{{ asset('bundles/orchestraorchestra/css/style_image_show.css') }}" type="text/css" media="all" />
{% endblock %}


{% block header %}
    {% include "OrchestraOrchestraBundle:Default:header.html.twig" %}  
    <script type="text/javascript" type="text/javascript" src="{{ asset('bundles/orchestraorchestra/js/yoxview/yoxview-init.js') }}"></script>
   
{% endblock %}


{% block contenu %}

<div id="contenu">
    
    {% include "OrchestraOrchestraBundle:Default:menu_gauche.html.twig" %}
   <div id="content">   
           <div id="breadcrumb">
            <a href="{{ path ('OrchestraOrchestraBundle_accueil') }}"><img src="{{ asset ('bundles/orchestraorchestra/img/home_breadcrumb.png') }}" alt="Accueil" /></a> > <a href="">Galeries</a> > <a href="">{{ entity.media.intitule }}</a> > {{ entity.titre }}
            </div>
            
           <div id="form_edit">        
                <div class="bloc_tuto width_tuto">

                    <div class="titre_bloc">
                        <div class="picto_portfolio"><img  height="18px" src="{{ asset ('bundles/orchestraorchestra/img/picto_galerie.png') }}" alt="" /></div>
                        <div class="txt_titre_bloc"><p>{{ entity.titre }}</p></div>
                    </div>
                    
                    <div class="bloc_contenu_tuto width_contenu_tuto">  
                        <div id="navi">
                            <div id="prev">
                            {% if previous is not null and categorie is not defined %}     
                                 <a href="{{ path('image_show', {'id': previous.id, 'user': user_id}) }}"> < Précédente</a>
                            {% elseif previous is not null and categorie is null %}     
                                 <a href="{{ path('galerie_show', {'id': previous.id}) }}"> < Précédente</a>
                            {% elseif previous is not null and categorie is defined %}
                                 <a href="{{ path('galerie_image', {'categorie': categorie, 'id': previous.id}) }}"> < Précédente</a>
                            {% endif %}
                            </div>
                            <div id="next">
                            {% if next is not null and categorie is not defined %}     
                                 <a href="{{ path('image_show', {'id': next.id, 'user': user_id}) }}">Suivante > </a>
                            {% elseif next is not null and categorie is null %}     
                                 <a href="{{ path('galerie_show', {'id': next.id}) }}">Suivante > </a>
                            {% elseif next is not null and categorie is defined %}
                                 <a href="{{ path('galerie_image', {'categorie': categorie, 'id': next.id}) }}">Suivante > </a>
                            {% endif %}
                            </div>
                        </div>

                        <div id="image" class="yoxview"><a href="{{ asset('image/' ~ entity.url) }}"><img src="{{ ('image/' ~ entity.url) | apply_filter('image_medium') }}" title="{{ entity.titre }}" /></a></div>
                        <div id="infos">
                        <p><strong>Par :</strong> <span class="orange">{{ entity.user.firstname }} {{ entity.user.lastname }}</span></p>
                        <p><strong>Descriptif :</strong> {{ entity.descriptif }}</p>
                        <p><strong>Média :</strong> {{ entity.media.intitule }}</p>
                        <p><strong>Logiciel :</strong> {{ entity.logiciel }}</p>
                        </div>
                        <div id="date">
                        <p>Créée le : {{ entity.dateCreation|format_date(null, 'fr', 'Europe/Paris', constant('IntlDateFormatter::LONG')) }}</p>
                        <p>Ajoutée le : {{ time_diff(entity.created) }} </p><p>Modifié le : {% if entity.updated %}
                               {{ time_diff(entity.updated) }}
                            {% else %}
                               jamais
                            {% endif %}</p>
                        </p>
                        </div>
                        
                     </div>
                </div> 

           </div>
           
           <ul id="actions_droite">
            
                <div class="titre_bloc retour_tuto">
                    <div class="picto_portfolio"><img height="18px" src="{{ asset ('bundles/orchestraorchestra/img/picto_galerie.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc">
                        <a href="javascript: history.go(-1)" title="revenir" alt="revenir">Revenir</a>
                    </div>
                </div>

            {% if entity.user == app.security.getToken().getUser() or is_granted("ROLE_ADMIN") %}
                <div class="titre_bloc retour_tuto">
                    <div class="picto_portfolio"><img height="18px" src="{{ asset ('bundles/orchestraorchestra/img/picto_galerie.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc">
                        <a href="{{ path('image_edit', { 'id': entity.id }) }}" title="modifier" alt="modifier">Modifier</a>
                    </div>
                </div>
                        
                <div class="titre_bloc retour_tuto">
                    <div class="picto_portfolio"><img height="18px" src="{{ asset ('bundles/orchestraorchestra/img/picto_galerie.png') }}" alt="" /></div>
                    <div class="txt_titre_bloc">
                        <form action="{{ path('image_delete', { 'id': entity.id }) }}" method="post">
                            {{ form_widget(delete_form) }}
                            <button class="btn_supp" type="submit">Supprimer</button>
                        </form>
                    </div>
                </div>
           {% endif %}
            </ul>

 </div>
</div>

{% endblock %}

