
       <div id="form_edit">        

            <h1>
                <a href="{{ path('annuaire') }}">
                {% if entities|length != 0 %}
                    {% if total is defined %}
                       {% if total > 1 %} {{ total }} utilisateurs
                       {% else %}{ total }} utilisateur
                       {% endif %}
                     {% endif %} 
                </a>
           </h1>
           
                <table class="records_list">
                    <thead>
                        <tr>
                            {% if is_granted("ROLE_ADMIN") %}<th>Id</th>{% endif %}
                            <th>{{ knp_pagination_sortable(entities, 'Prénom', 'a.firstname') }}</th>
                            <th>{{ knp_pagination_sortable(entities, 'Nom', 'a.lastname') }}</th>
                            <th>{{ knp_pagination_sortable(entities, 'Classe', 'a.classe') }}</th>
                            {% if is_granted("ROLE_ADMIN") %}<th>Email</th>{% endif %}
                            <th>Dernière connexion</th>
                            <th>Professeur</th>
                            <th>Eleve</th>
                            <th>Contact</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for entity in entities %}
                        <tr>
                            {% if is_granted("ROLE_ADMIN") %}<td>{{ entity.id }}</td>{% endif %}
                            <td><a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': entity.id }) }}">{{ entity.firstname }}</a></td>
                            <td>{{ entity.lastname }}</td>
                            <td>{{ entity.classe }}</td>
                            {% if is_granted("ROLE_ADMIN") %}<td>{{ entity.email }}</td>{% endif %}
                            <td>{% if entity.LastLogin %}{{ time_diff(entity.LastLogin) }}{% else %}Jamais{% endif %}</td>
                            <td>{% if entity.isProfesseur == 1 %}<input type="radio" checked />{% else %}<input type="radio" disabled="disabled" />{% endif %}</td>
                            <td>{% if entity.isEleve == 1 %}<input type="radio" checked />{% else %}<input type="radio" disabled="disabled" />{% endif %}</td>
                            <td>{% if entity.isContact == 1 %}<input type="radio" checked />{% else %}<input type="radio" disabled="disabled" />{% endif %}</td>
                            <td>
                                <ul>
                                    <li>
                                        <a href="{{ path('OrchestraOrchestraBundle_profil', { 'id': entity.id }) }}">Voir</a>
                                    </li>
                                    {% if is_granted("ROLE_ADMIN") or entity.username == app.user.username %}
                                    <li>
                                        <a href="{{ path('user_edit', { 'id': entity.id }) }}">Modifier</a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            
            {% else %}
            <p>Aucun résultats</p>
            <a href="{{ path('annuaire') }}">Revenir à l'annuaire</a>
            {% endif %}

            
<div class="navigation">
    {{ knp_pagination_render(entities) }}
</div>
            
      </div>  